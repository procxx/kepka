sudo: required
dist: trusty

language: cpp

cache:
  directories:
    - $HOME/travisCacheDir

env:
  matrix:
   - BUILD_VERSION=""

matrix:
  fast_finish: true

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
      - sourceline: 'ppa:kirillshkrogalev/ffmpeg-next'
    packages:
      - bison
      - build-essential
      - cmake
      - devscripts
      - dpatch
      - equivs
      - fakeroot
      - g++-7
      - gcc-7
      - git
      - libappindicator-dev
      - libasound2-dev
      - libdbusmenu-glib-dev
      - liblzma-dev
      - libopus-dev
      - libpulse-dev
      - libssl-dev
      - libunity-dev
      - libva-dev
      - libvdpau-dev
      - libxcb-xkb-dev
      - libxkbcommon-dev
      - xutils-dev
      - yasm
      - ffmpeg
      - libswresample-ffmpeg-dev
      - libswscale-ffmpeg-dev
      - libpostproc-ffmpeg-dev
      - libavfilter-ffmpeg-dev
      - libavutil-ffmpeg-dev
      - libavformat-ffmpeg-dev
      - libavcodec-ffmpeg-dev
      - libopenal-data
      - libopenal-dev
      - libopenal1
      - libqt5core5a
      - qtbase5-dev
      - libqt5gui5
      - qtsystems5-private-dev
      - qttools5-private-dev
      - qtbase5-private-dev
      - libalut-dev

before_install:
  - export CXX="g++-7" CC="gcc-7"
  - sudo update-alternatives --install /usr/bin/gcc gcc /usr/bin/gcc-7 70 --slave /usr/bin/g++ g++ /usr/bin/g++-7
  - sudo update-alternatives --config gcc
  - g++ --version

before_script:
  - cmake -DCMAKE_PREFIX_PATH="/usr/lib/x86_64-linux-gnu/;/usr/include/" .

script:
  - make -j2
